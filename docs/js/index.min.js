function main(){let e=document.querySelector("#main-navlist"),t=document.querySelector("#footer-sitemap"),n=document.querySelector("#mobile-sidenav"),i="grey-text text-lighten-3",o=[{link:"./index.html",desc:"Home"},{link:"./guns.html",desc:"Guns"},{link:"./gunmap.html",desc:"Gun Map"},{link:"./contact.html",desc:"Contact"}],c=[{isDivider:!1,link:o[0].link,desc:o[0].desc},{isDivider:!0},{isDivider:!1,link:o[1].link,desc:o[1].desc},{isDivider:!1,link:o[2].link,desc:o[2].desc},{isDividier:!1,link:o[3].link,desc:o[3].desc}];initAnchors(o,e,i),initAnchors(o,t,i),initAnchors(c,n),initTheme(),document.getElementById("main_guns")&&initGunList(),document.getElementById("main_416map")&&initGunMap()}function initAnchors(e,t,n=null){for(const i of e){let e=document.createElement("li"),o=document.createElement("a");i.isDivider?(e.classList="divider",t.appendChild(e)):(n&&(o.classList=n),o.href=i.link,o.innerHTML=i.desc,e.appendChild(o),t.appendChild(e))}}function getThemeMap(){return{body:{dark:"white-text grey darken-2",light:"black-text grey lighten-2"},cards:{dark:"card grey darken-4",light:"card grey lighten-4"}}}function initTheme(){let e=document.querySelector("#site_darkmodetoggle");if(initTheme_body(e,getThemeMap()),document.getElementById("main_guns")){let t=Array.from(document.querySelectorAll(".card"));localStorage.hasOwnProperty("site_theme_cards")&&initTheme_cards(t,getThemeMap(),localStorage.site_theme_cards==getThemeMap().cards.dark),e.addEventListener("click",function(){initTheme_cards(t,getThemeMap(),e.checked)})}}function initTheme_body(e,t){let n=document.querySelector("body");localStorage.hasOwnProperty("site_theme_body")&&(n.classList=localStorage.site_theme_body==t.body.dark?t.body.dark:t.body.light,e.checked=n.classList==t.body.dark),e.addEventListener("click",function(){const t=getThemeMap();n.classList=e.checked?t.body.dark:t.body.light,localStorage.site_theme_body=n.classList})}function initTheme_cards(e,t,n){const i=n?t.cards.dark:t.cards.light;e.forEach(function(e,t){e.classList=i}),localStorage.site_theme_cards=i}function initGunList(){let e=Array.from(document.querySelectorAll(".card")),t=document.querySelector("#gunListModal"),n=t.querySelector(".modal-content").querySelector("table"),i="./js/gundata.json";loadJSON(i,function(t){let i=JSON.parse(t);e.forEach(function(e,t){const o=e.outerText.split("\n")[0];e.querySelector(".stat-trigger").addEventListener("click",function(e){const t="Showing Gun Stats for: ",c=findRowByField(i,"name",o);n.querySelector("caption").innerHTML=t+c.name,n.querySelector("thead").replaceChildren(function(){let e=document.createElement("tr"),t=document.createElement("th");t.textContent="Field";let n=document.createElement("th");return n.textContent="Value",e.appendChild(t),e.appendChild(n),e}());let l=n.querySelector("tbody");for(;l.firstChild;)l.removeChild(l.firstChild);for(const e in c)n.querySelector("tbody").appendChild(function(){let t=document.createElement("tr"),n=document.createElement("td");n.textContent=e;let i=document.createElement("td");return i.textContent=c[e],t.appendChild(n),t.appendChild(i),t}())})})})}function findRowByField(e,t,n){for(const i of e)if(i[t]==n)return i}function loadJSON(e,t){let n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onreadystatechange=function(){4==n.readyState&&"200"==n.status&&t(n.responseText)},n.send(null)}function initGunMap(){let e=document.querySelector(".mapHolder"),t=e.querySelector("img"),n=e.querySelector("map");const i="./js/gunmapdesc.json",o={height:t.naturalHeight,width:t.naturalWidth};loadJSON(i,function(e){const i=JSON.parse(e);for(const e of n.children){findRowByField(i,"partname",e.getAttribute("title"));let n=[];e.getAttribute("coords").split(",").forEach(function(e,t){n.push(parseInt(e))}),console.log("Base Image Resolution: "+o.width+"x"+o.height),console.log("Coordinates of area element:"),console.log(n);let c=[];n.forEach(function(e,t){0===t||2===t?c[t]=n[t]/o.width:1!==t&&3!==t||(c[t]=n[t]/o.height)}),console.log("Ratio of coordinate to img reso"),console.log(c),console.log("Current Image Resolution: "+t.clientWidth+"x"+t.clientHeight);let l=[];c.forEach(function(e,n){0===n||2===n?l[n]=e*t.width:1!==n&&3!==n||(l[n]=e*t.height)}),console.log("Adjusted Values"),console.log(l),t.addEventListener("click",function(e){console.log("current map img width: "+t.clientWidth),console.log("current map img height: "+t.clientHeight)})}})}M.AutoInit(),document.addEventListener("DOMContentLoaded",function(e){main()});